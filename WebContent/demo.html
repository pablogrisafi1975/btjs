<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>btjs demo</title>
<link rel="stylesheet" href="lib/bootstrap-3.3.6-dist/css/bootstrap.min.css">
<!-- Optional theme 
<link rel="stylesheet" href="lib/bootstrap-3.3.6-dist/css/bootstrap-theme.min.css">
-->
</head>
<body class="container">
  <h1>Components</h1>
  <div class="row" >
    <div class="col-md-2">Labels</div>
    <div class="col-md-2" ><h1><span id = 'label1'></span></h1></div>
    <div class="col-md-2" ><h2><span id = 'label2'></span></h2></div>
    <div class="col-md-2" ><h3><span id = 'label3'></span></h3></div>
    <div class="col-md-2" ><h4><span id = 'label4'></span></h4></div>
    <div class="col-md-2" ><h5><span id = 'label5'></span></h5></div>
  </div>
  <div class="row" >
    <div class="col-md-2">Badges</div>
    <div class="col-md-2" ><div id = 'badge1'></div></div>
    <div class="col-md-2" ><div id = 'badge2'></div></div>
    <div class="col-md-2" ><div id = 'badge3'></div></div>
    <div class="col-md-2" ><div id = 'badge4'></div></div>
    <div class="col-md-2" ><div id = 'badge5'></div></div>
  </div>  
  <div class="row" >
    <div class="col-md-2">Glyphicons</div>
    <div class="col-md-2" ><div id = 'glyphicon1'></div></div>
    <div class="col-md-2" ><div id = 'glyphicon2'></div></div>
    <div class="col-md-2" ><div id = 'glyphicon3'></div></div>
    <div class="col-md-2" ><div id = 'glyphicon4'></div></div>
    <div class="col-md-2" ><div id = 'glyphicon5'></div></div>
  </div>    
  <div class="row" >
    <div class="col-md-2">Buttons</div>
    <div class="col-md-2" ><div id = 'button1'></div></div>
    <div class="col-md-2" ><div id = 'button2'></div></div>
    <div class="col-md-2" ><div id = 'button3'></div></div>
    <div class="col-md-2" ><div id = 'button4'></div></div>
    <div class="col-md-2" ><div id = 'button5'></div></div>
  </div>    
  <br />
  <div id="div1"></div>
  <br />
  <div id="div2" /></div>
  <br />
  <div id="div3" /></div>
  <br />
  <script src="lib/jquery/jquery-2.2.0.js"></script>
  <script src="lib/bootstrap-3.3.6-dist/js/bootstrap.js"></script>
  <script src="src/btjs.js"></script>
</body>
<script>
	//TODO: id inside options?
	/*
	 *
	si no existe el id se genera uno prefijado con btjs-(autonumerico)
	si existe se usa ese
		si ya había un elemento se reemplaza
		si no había se guarda en memoria
	
	 */
	 btjs.newLabel({
		 id : 'label1',
		 text: 'Basic info label <>',		 
		 intent: btjs.INTENT.INFO,
		 tooltip: 'text tooltip on label',
		 listeners:{
			 click: function(){alert(' click on label');}
		 }
	 });
	 btjs.newLabel({
		 id : 'label2',
		 html: 'label with <i>html</i>',		 
		 intent: btjs.INTENT.PRIMARY,
		 tooltip: {
			 title: 'slow tooltip',
			 placement : 'left',
			 animation: true,
			delay: 500,
		 },
		 popover: {
			title : 'label popover title',
			content : 'label popover content',
			placement : 'bottom'
		 }
	 });
	 btjs.newLabel({
		 id : 'label3',
		 text: 'with glyphicon & badge',		 
		 intent: btjs.INTENT.WARNING,
		 glyphicon: 'music',
		 badge: '55'
	 });	 
	 btjs.newLabel({
		 id : 'label4',
		 text: 'glyphicon & badge & tooltips',		 
		 intent: btjs.INTENT.PRIMARY,
		 tooltip: 'label tooltip',
		 glyphicon: {
			 glyphicon : 'music',
			 tooltip: 'glyphicon tooltip'
		 },
		 badge: {
			 text : '55',
			 tooltip: 'badge tooltip'
		 },
	 });	 
	 
	 btjs.newBadge({
		 id : 'badge1',
		 text: 'Basic info badge',		 
		 intent: btjs.INTENT.INFO,
		 tooltip: 'text tooltip on badge',
		 listeners:{
			 click: function(){alert('click on badge');}
		 }
	 });
	 btjs.newBadge({
		 id : 'badge2',
		 html: 'badge with <i>html</i>',		 
		 intent: btjs.INTENT.PRIMARY,
		 tooltip: {
			 title: 'slow tooltip',
			 placement : 'left',
			 animation: true,
			delay: 500,
		 },
		 popover: {
			title : 'badge popover title',
			content : 'badge popover content',
			placement : 'bottom'
		 }
	 });	 
	 btjs.newBadge({
		 id : 'badge3',
		 text: 'badge with glyphicon',		 
		 intent: btjs.INTENT.WARNING,
		 glyphicon: 'music'
	 });		 
	 
	 btjs.newGlyphicon({
		 id : 'glyphicon1',
		 icon: 'music',
		 tooltip: 'text tooltip on badge',
		 listeners:{
			 click: function(){alert('click on badge');}
		 }
	 });
	 btjs.newGlyphicon({
		 id : 'glyphicon2',
		 icon: 'heart', 
		 tooltip: {
			 title: 'slow tooltip',
			 placement : 'left',
			 animation: true,
			delay: 500,
		 },
		 popover: {
			title : 'badge popover title',
			content : 'badge popover content',
			placement : 'bottom'
		 }
	 });	 
	 btjs.newGlyphicon({
		 id : 'glyphicon3',
		 icon: 'star'	 
	 });		 	 
	 


	 btjs.newButton({
		 id : 'button1',
		 text: 'Basic button info extra-small <>',
		 size: btjs.SIZE.EXTRA_SMALL,
		 intent: btjs.INTENT.INFO,
		 tooltip: 'text tooltip on button',
		 listeners:{
			 click: function(){alert('click on button');}
		 }
	 });
	 btjs.newButton({
		 id : 'button2',
		 html: 'button with <i>html</i> small',
		 size: btjs.SIZE.SMALL,
		 intent: btjs.INTENT.PRIMARY,
		 tooltip: {
			 title: 'slow tooltip',
			 placement : 'left',
			 animation: true,
			delay: 500,
		 },
		 popover: {
			title : 'button popover title',
			content : 'button popover content',
			placement : 'bottom'
		 }
	 });
	 btjs.newButton({
		 id : 'button3',
		 text: 'with glyphicon & badge',		 
		 intent: btjs.INTENT.WARNING,
		 glyphicon: 'music',
		 badge: '55'
	 });
	 btjs.newButton({
		 id : 'button4',
		 text: 'large button',		 
		 size: btjs.SIZE.LARGE,
		 intent: btjs.INTENT.WARNING,
		 glyphicon: 'music',
		 badge: '55'
	 });


	makeDropdown(
			'#div3',
			{
				text : 'first DropDown',
				//size: 'extra-small',
				blockLevel : false,
				intent : 'warning',
				glyphicon : 'search',
				badge : '44',
				/* is not working
				tooltip: {
					title: 'tooltip on dropdown',
					placement: 'right'
					}, */
				enabled : true,
				//dropup: true,
				//align: 'right', not working
				items : [
						{
							type : 'header',
							text : 'Actions'
						},
						{
							type : 'link',
							id : 'item-action',
							text : 'Console',
							listeners : {
								click : function(e) {
											console
													.log('Console button was clicked with e:'),
											console.log(e);
								},
							}
						},
						{
							id : 'item-action',
							text : 'Action'
						},
						{
							id : 'item-another-action',
							text : 'Another Action'
						},
						{
							type : 'header',
							text : 'Edit'
						},
						{
							type : 'link',
							text : 'Select all',
							enabled : false,
							listeners : {
								click : function(e) {
											console
													.log('Select all button was clicked with e:'),
											console.log(e);
								},
							}
						}, {
							type : 'link',
							text : 'Copy',
							id : 'copy',
							glyphicon : 'copy'
						}, {
							type : 'divider'
						}, {
							type : 'link',
							text : 'Paste',
							badge : 'has'
						} ]
			});

	function makeDropdown(id, options) {
		var size = '';
		switch (options.size) {
		case 'large':
			size = 'btn-lg';
			break;
		case 'small':
			size = 'btn-sm';
			break;
		case 'extra-small':
			size = 'btn-xs';
			break;
		}
		var dropClass = options.dropup ? 'dropup' : 'dropdown';
		var blockLevel = options.blockLevel ? 'btn-block' : '';
		var enabled = options.enabled ? '' : 'disabled="disabled"';
		var glyphiconTemplate = typeof options.glyphicon === 'string' ? '<span class="glyphicon glyphicon-' + options.glyphicon + '" aria-hidden="true"></span> '
				: '';
		var badgeTemplate = typeof options.badge !== 'undefined' ? ' <span class="badge">'
				+ options.badge + '</span>'
				: '';
		var tooltipTemplate = typeof options.tooltip === 'string' ? ' data-toggle="tooltip" title="'
				+ options.tooltip + '" '
				: '';
		if (typeof options.tooltip === 'object') {
			tooltipTemplate = ' data-toggle="tooltip" title="'
					+ options.tooltip.title
					+ '" data-container="#dropdownMenuWrapper"'
			if (typeof options.tooltip.placement === 'string') {
				tooltipTemplate += ' data-placement = "'
						+ options.tooltip.placement + '"';
			}
			if (typeof options.tooltip.animation === 'boolean') {
				tooltipTemplate += ' data-animation = "'
						+ options.tooltip.animation + '"';
			}
			if (typeof options.tooltip.delay === 'number') {
				tooltipTemplate += ' data-delay = "' + options.tooltip.delay
						+ '"';
			}
		}
		var alignClass = options.align == 'right' ? 'dropdown-menu-right' : '';
		var template = '<div class="' + dropClass + '" ' + tooltipTemplate+' id = "dropdownMenuWrapper">'
				+ '  <button class="btn btn-' + options.intent + 
				' ' + size + 
				' ' +  blockLevel + ' dropdown-toggle" type="button"' 
				+ enabled + 'id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">'
				+ glyphiconTemplate
				+ options.text
				+ badgeTemplate
				+ '    <span class="caret"></span>'
				+ '  </button>'
				+ '  <ul class="dropdown-menu ' + alignClass + '" aria-labelledby="dropdownMenu1" id="dropdownMenu1-items">'
				+ '  </ul>' + '</div>';
		var newDropDown = $(template);
		if (typeof options.listeners === 'object') {
			for ( var listener in options.listeners) {
				newDropDown.on(listener, options.listeners[listener]);
			}
		}

		var $items = newDropDown.find('#dropdownMenu1-items');

		for (var i = 0; i < options.items.length; i++) {
			var item = options.items[i];
			var itemTemplate = '';
			switch (item.type) {
			case 'header':
				itemTemplate = '<li class="dropdown-header">' + item.text
						+ '</li>';
				break;
			case 'divider':
				itemTemplate = '<li role="separator" class="divider"></li>';
				break;
			default:
				var disabled = item.enabled === false ? 'class= "disabled"'
						: '';
				var glyphiconTemplate = typeof item.glyphicon === 'string' ? '<span class="glyphicon glyphicon-' + item.glyphicon + '" aria-hidden="true"></span> '
						: '';
				var badgeTemplate = typeof item.badge !== 'undefined' ? ' <span class="badge">'
						+ item.badge + '</span>'
						: '';

				itemTemplate = '<li id="" ' + disabled + '><a href="#">'
						+ glyphiconTemplate + item.text + badgeTemplate
						+ '</a></li>';
				break;
			}
			var $item = $(itemTemplate);
			if (typeof item.listeners === 'object') {
				for ( var listener in item.listeners) {
					$item.on(listener, item.listeners[listener]);
				}
			}
			$items.append($item)

		}

		$(id).replaceWith(newDropDown);
		return newDropDown;

	}

	$('[data-toggle="tooltip"]').tooltip();
	$('[data-toggle="popover"]').popover();
</script>
</html>